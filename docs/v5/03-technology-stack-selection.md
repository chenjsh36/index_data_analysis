# 技术栈选型文档（Technology Stack Selection）— v5 信号可读化与推导逻辑展示

**文档版本**：1.0  
**产出日期**：2026-02-12  
**依据**：研发流程步骤 3 - 技术栈选择  
**上游输入**：`v5/02-requirements-documentation.md`、index_data_analysis 现有技术栈、nasdaq_v1 的 print_trend_report 实现

---

## 1. 选型结论总览

**v5 需求（run_signal 可读报告 + 推导逻辑）不涉及新技术或新依赖，完全在现有技术栈内完成。**

- **实现方式**：在 CLI 或独立报告模块中，用 Python 字符串格式化、按策略名分支的模板逻辑，将既有 `df`（最后一行）、`sig`、`risk` 拼成可读报告并打印。
- **无新增依赖**：不引入新库、新框架；仅展示层代码（print/字符串拼接）。
- **参考实现**：nasdaq_v1 的 `trend.py` 中 `print_trend_report` / `print_trend_report_v2` 已提供版式与字段顺序参考，可直接对齐风格。

---

## 2. 技术栈沿用清单（无新增）

| 层次 | 选型 | v5 使用方式 |
|------|------|-------------|
| 开发语言 | Python 3.9+ | 不变；报告格式化用 f-string 或 format、多行字符串 |
| 数据处理 | pandas | 不变；仅读取 df 最后一行及列值，无新计算 |
| 配置 | YAML（PyYAML） | 不变；可选读取策略配置中的阈值等用于报告展示 |
| CLI | argparse | 不变；run_signal 参数与调用方式不变 |

---

## 3. v5 需求与技术栈映射

| v5 需求 | 涉及技术 | 说明 |
|---------|----------|------|
| FR-V5-01 可读报告格式 | Python 字符串、print | 分隔线、标题行、多行「标签: 数值」、止损止盈；版式参考 nasdaq_v1 |
| FR-V5-02 推导逻辑展示 | Python 分支 + 字符串模板 | 按 strategy_name 与 sig["reason"] 选择模板，填入 row/配置中的数值 |
| FR-V5-03 策略覆盖与扩展 | Python 分支或策略→formatter 映射 | 每个策略一段格式化逻辑，新增策略时增加分支或映射项 |

---

## 4. 是否涉及 UI 与设计系统

- v5 仅改变**终端文本输出**形态，不涉及网站、App、中后台或落地页等图形界面。
- **结论**：不涉及步骤 3 规范中的「涉及 UI 时的设计规范与设计系统」；无需调用 ui-ux-pro-max 或生成设计系统。

---

## 5. 风险评估与依赖

| 风险 | 评估 | 缓解 |
|------|------|------|
| 报告逻辑与策略逻辑不一致 | 低 | 推导模板与策略的 reason/规则一一对应，单测可断言关键文案 |
| 新增策略遗漏报告分支 | 低 | 文档约定扩展方式；未知策略时可回退为「简要可读输出」或保留 raw 打印 |

**依赖**：无新增；现有 requirements.txt 无需修改。

---

## 6. 检查点

| 检查项 | 状态 |
|--------|------|
| 是否需要新技术/新语言？ | 否 |
| 是否新增依赖包？ | 否 |
| 现有技术栈是否满足全部 v5 需求？ | 是 |
| 是否涉及网站/App/中后台等 UI？ | 否 |

---

## 7. 输出物

| 输出物 | 状态 |
|--------|------|
| 技术栈选型文档 | ✅ 本文档 |
| 技术选型评估 | ✅ 第 2、3 节 |
| 设计系统 | 不适用 |

---

**下一步**：确认技术栈选型后，进入「步骤 4：技术方案设计」，产出 v5 的报告格式与推导逻辑的详细设计（模块划分、各策略报告模板与推导模板、接口约定）。
